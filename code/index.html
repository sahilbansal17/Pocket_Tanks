<html>

    <head>
        <title>
        Randomly Generated Terrain
        </title>
        <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    </head>

    <body onLoad="drawTerrain();">

        <canvas id="terrain" width="800" height="600"></canvas>

    </body>

    <script>
        // stage for referencing the canvas element
        var stage = new createjs.Stage("terrain");
        
        // canvas and its width, height
        var canvas = document.getElementById("terrain");
        var width = canvas.width;
        var height = canvas.height;
        
        // gets a random value of y coordinate between min and max (uniform distribution)
        function getUniformRandomY(min, max){
            return Math.floor(Math.random() * (max - min)) + min;
        }
        
        // draws the terrain 
        function drawTerrain(){
            var points = []; // list of points 
            var factor = 80; // distance between two points of terrain curve
            var numPoints = width/factor; // number of points 
        
            var line = new createjs.Shape(); // shape defining the terrain curve 
            points.push([0, 3 * height/4]); // intial point
            
            for(var x = factor; x <= width; x += factor){
                var y = getUniformRandomY(height/2, 3 * height/4); // min = h/2, max = 3h/4
                points.push([x, y]);
            }
            
            // add graphics to the shape 
            line.graphics.beginLinearGradientFill(["#0F0","#040"], [0, 1], 0, 3 * height/4, 0, height);
            line.graphics.beginStroke("#040").setStrokeStyle(3);
            // line.graphics.beginLinearGradientFill(["#0F0","#040"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);
            for(var ptCt = 1; ptCt <= numPoints; ptCt ++){
                line.graphics.drawRect(points[ptCt - 1][0], points[ptCt - 1][1], factor, height - points[ptCt - 1][1]);
                line.graphics.moveTo(points[ptCt - 1][0], points[ptCt - 1][1]).lineTo(points[ptCt][0], points[ptCt][1]);
            }
            line.graphics.endFill();
            
            // render it on the stage
            stage.addChild(line);
            stage.update();
            
            // bound the shape 
            
        }
    </script>

</html>